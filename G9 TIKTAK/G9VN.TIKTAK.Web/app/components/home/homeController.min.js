!function (e) { function t(e, t, i, n, o) { function a() { clocktime = setTimeout("time()", "1000", "JavaScript") } function r(e) { e -= -.5; for (var t = new String(e), i = "", n = 0; n < t.length; n++) { if ("." == t[n]) { t[n + 1] >= "5" && (i[n] = t[n] - -1); break } i += t[n] } for (var o = "", a = 0, n = i.length - 1; n >= 0; n--) a++, o += i[n], 3 == a && 0 != n && (o += ",", a = 0); for (var r = new String(o), l = "", n = r.length - 1; n >= 0; n--) l += r[n]; return l } function l() { e.stc = "display: block;", e.s5 = "display: none;", e.hienthi = "Thu gọn" } function s() { e.stc = "display: none;", e.s5 = "display: block;", e.hienthi = "Tất cả" } function d() { n.get("api/salehome/reportHome", null, function (t) { e.listReportHome = t.data.listReportHomeViewModel, e.listHistory = t.data.listSaleInvoiceViewModel, e.listMan = t.data.reportHomeNewViewModel; for (var i = 0; i <= e.listReportHome.length; i++) { if (6 == i) e.d1 = e.listReportHome[i].revenue, e.n1 = e.listReportHome[i].date; else if (i == e.listReportHome.length) break; if (5 == i) e.d2 = e.listReportHome[i].revenue, e.n2 = e.listReportHome[i].date; else if (i == e.listReportHome.length) break; if (4 == i) e.d3 = e.listReportHome[i].revenue, e.n3 = e.listReportHome[i].date; else if (i == e.listReportHome.length) break; if (3 == i) e.d4 = e.listReportHome[i].revenue, e.n4 = e.listReportHome[i].date; else if (i == e.listReportHome.length) break; if (2 == i) e.d5 = e.listReportHome[i].revenue, e.n5 = e.listReportHome[i].date; else if (i == e.listReportHome.length) break; if (1 == i) e.d6 = e.listReportHome[i].revenue, e.n6 = e.listReportHome[i].date; else if (i == e.listReportHome.length) break; if (0 == i) e.d7 = e.listReportHome[i].revenue, e.n7 = e.listReportHome[i].date; else if (i == e.listReportHome.length) break } e.loadhightchar(), e.time() }) } function h() { n.get("api/account/users", null, function (t) { e.authentication.storeName = t.data.StoreName, e.authentication.phoneNumber = t.data.PhoneNumber, e.authentication.address = t.data.Address, e.authentication.fullName = t.data.FullName, e.authentication.UserName = t.data.UserName, e.authentication.Email = t.data.Email, e.authentication.BirthDay = t.data.BirthDay, e.authentication.Id = t.data.Id, n.get("api/account/store", null, function (t) { e.authentication.expirydate = t.data.Expirydate, e.dateTime = t.data.Expirydate; var i = "", n = e.dateTime.substring(8, 10), o = e.dateTime.substring(5, 7), a = e.dateTime.substring(0, 4); i = o + "/" + n + "/" + a; var r = new Date, l = new Date(i), s = Math.abs(l.getTime() - r.getTime()), d = Math.ceil(s / 864e5); e.showdateend = d, e.showdateend > 7 && 0 !== $("#showone").length && (document.getElementById("showone").style.display = "none") }, function (e) { o.displayError(e.data) }), e.getReportHome() }, function (e) { o.displayError(e.data) }) } e.checkLogin = function () { 0 == i.authenticationData.IsAuthenticated ? t.go("login") : e.FindUser() }, e.loadhightchar = function () { Highcharts.setOptions({ chart: { style: { fontFamily: "unset" } } }), Highcharts.chart("a", { title: { text: "BIỂU ĐỒ THỐNG KÊ DOANH THU" }, subtitle: { text: "7 ngày bán hàng gần nhất" }, xAxis: { categories: [e.n1, e.n2, e.n3, e.n4, e.n5, e.n6, e.n7] }, series: [{ name: "Doanh thu ", type: "column", colorByPoint: !0, data: [e.d1, e.d2, e.d3, e.d4, e.d5, e.d6, e.d7], showInLegend: !1 }] }) }, e.Currency = r, e.getReportHome = d, e.time = a, e.showAll = l, e.hideAll = s, e.item = { tonkho: 0 }, e.listSaleOrder = [], e.listHistory = [], e.listReportHome = [], e.listMan = [], e.FindUser = h, e.totalRevenue = 0, e.stc = "display: none;", e.s5 = "display: block;", e.hienthi = "Tất cả", e.checkLogin() } e.controller("homeController", t), t.$inject = ["$scope", "$state", "authData", "apiService", "notificationService", "$ngBootbox"] }(angular.module("tiktak"));