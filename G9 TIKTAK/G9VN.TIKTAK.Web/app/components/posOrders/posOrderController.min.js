!function (t) {
    function e(t, e, a, n, s) {
        function r(e) { 1 == e && (t.dis = "none !important", t.dis1 = "block !important", t.getSalesPromotion()), 2 == e && (t.dis = "block !important", t.dis1 = "none !important") } function u() { e.get("api/printedform/getByID/b1094b8a-131e-49ea-88df-120d0ee26b16", null, function (e) { t.formView = e.data, document.getElementById("demo").innerHTML = t.formView.HtmlHeader + t.formView.HtmlBody, s(document.getElementById("demo"))(t) }, function () { console.log("load items failed") }) } function c(e) { t.tab = e; for (var a = 0; a < t.dp2.length; a++) a == t.tab ? (t.dp2[a] = "block", t.stype[t.tab] = "background:#fff ;border-top: 3px solid #2dc3e8;z-index: 6;") : (t.dp2[a] = "none", t.stype[a] = "background: none;border-top: none;z-index: auto;"); 0 != t.shoppingCart[t.tab].lsItem.length ? v() : t.clear() } function m(e) { if ("none" === t.shoppingCart[t.tab].lsItem[e - 1].display_discount) { t.shoppingCart[t.tab].lsItem[e - 1].display_discount = "block"; for (var a = 0; a < t.shoppingCart[t.tab].lsItem.length; a++) a !== e - 1 && (t.shoppingCart[t.tab].lsItem[a].display_discount = "none") } else t.shoppingCart[t.tab].lsItem[e - 1].display_discount = "none" } function p(e) { t.shoppingCart[t.tab].lsItem[e - 1].status_discount === !1 ? (Number(O(t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item)) > 100 && (t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item = "100"), Number(O(t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item)) <= 0 && (t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item = "0")) : t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item = C(t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item) } function h(e) { "" !== t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item && null !== t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item && "0" !== t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item && (t.shoppingCart[t.tab].lsItem[e - 1].status_discount === !1 ? t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item = Number(100 * Number(O(t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item)) / (t.shoppingCart[t.tab].lsItem[e - 1].quan * Number(O(t.shoppingCart[t.tab].lsItem[e - 1].unit_price)))) : t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item = C((Number(t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item) * t.shoppingCart[t.tab].lsItem[e - 1].quan * Number(O(t.shoppingCart[t.tab].lsItem[e - 1].unit_price)) / 100).toFixed(2))) } function d(e) { t.shoppingCart[t.tab].lsItem[e - 1].status_discount === !1 ? t.shoppingCart[t.tab].lsItem[e - 1].chietkhau = C(Number(t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item) * t.shoppingCart[t.tab].lsItem[e - 1].quan * Number(O(t.shoppingCart[t.tab].lsItem[e - 1].unit_price)) / 100) : t.shoppingCart[t.tab].lsItem[e - 1].chietkhau = t.shoppingCart[t.tab].lsItem[e - 1].txt_discount_item, t.TinhToan(e), t.shoppingCart[t.tab].lsItem[e - 1].display_discount = "none" } function g() { e.get("api/account/users", null, function (a) { t.account = a.data, e.get("api/itemOption/AutoComplete?BranchID=" + t.account.BranchID, null, function (e) { t.listItems = e.data; for (var a in t.listItems) t.listItems[a].NameCut = t.limitChar(t.listItems[a].Name, 10) }) }) } function b(t, e) { var a = t.slice(0, e); return t = t.length >= e ? a + "..." : a } function C(t) { t -= -.5; for (var e = new String(t), a = "", o = 0; o < e.length; o++) { if ("." == e[o]) { e[o + 1] >= "5" && (a[o] = e[o] - -1); break } a += e[o] } for (var n = "", s = 0, o = a.length - 1; o >= 0; o--) s++, n += a[o], 3 == s && 0 != o && (n += ",", s = 0); for (var i = new String(n), r = "", o = i.length - 1; o >= 0; o--) r += i[o]; return r } function O(t) { for (var e = new String(t), a = "", o = 0; o < e.length; o++) "," != e[o] && (a += e[o]); return a } function D(a) { for (var o in t.listCustomer1) if (t.listCustomer1[o].ObjectID == a) { if (t.disAdvance = "block", t.shoppingCart[t.tab].customer = t.listCustomer1[o], t.searchText = t.shoppingCart[t.tab].customer.ObjectName, t.shoppingCart[t.tab].customer.ObjectAddress = b(t.shoppingCart[t.tab].customer.ObjectAddress, 27), t.shoppingCart[t.tab].customer.debt_demo = t.shoppingCart[t.tab].customer.Debt, t.shoppingCart[t.tab].customer.debt = 0, t.shoppingCart[t.tab].customer.selectDebt = !1, t.shoppingCart[t.tab].customer.displayDebt = "none", 2 === t.shoppingCart[t.tab].customer.ApplyIncentives) { if (e.get("api/pricePolicy/getbyid/" + t.listCustomer1[o].PricePolicyDefault, null, function (e) { t.shoppingCart[t.tab].customer.PricePolicyDefaultName = e.data.PricePolicyName }, function (t) { console.log(t.data) }), e.get("api/paymentSchedule/getbyid/" + t.listCustomer1[o].PaymentScheduleDefault, null, function (e) { t.shoppingCart[t.tab].customer.PaymentScheduleDefaultName = e.data.PaymentScheduleName }, function (t) { console.log(t.data) }), 1 === t.listCustomer1[o].PaymentMethodDefault ? t.shoppingCart[t.tab].customer.PaymentMethodDefaultName = "Tiền mặt" : (2 === t.listCustomer1[o].PaymentMethodDefault && (t.shoppingCart[t.tab].customer.PaymentMethodDefaultName = "Chuyển khoản"), 3 === t.listCustomer1[o].PaymentMethodDefault && (t.shoppingCart[t.tab].customer.PaymentMethodDefaultName = "COD")), t.shoppingCart[t.tab].lsItem.length > 0) for (var o in t.shoppingCart[t.tab].lsItem) null !== t.shoppingCart[t.tab].customer.TaxRateDefault && (t.shoppingCart[t.tab].lsItem[o].thue = t.shoppingCart[t.tab].customer.TaxRateDefault), "3048ffe8-e2c8-4b43-a8a5-766ad6643a83" === t.shoppingCart[t.tab].customer.PricePolicyDefault.toString() ? t.shoppingCart[t.tab].lsItem[o].unit_price = t.shoppingCart[t.tab].lsItem[o].saleprice : ("f53cecc7-5a7b-44b9-894b-c6b18ac85d49" === t.shoppingCart[t.tab].customer.PricePolicyDefault.toString() && (t.shoppingCart[t.tab].lsItem[o].unit_price = t.shoppingCart[t.tab].lsItem[o].WholesalePrice), "155acc95-47be-4169-a73a-872aec588f54" === t.shoppingCart[t.tab].customer.PricePolicyDefault.toString() && (t.shoppingCart[t.tab].lsItem[o].unit_price = t.shoppingCart[t.tab].lsItem[o].PurchasePrice)), t.TinhToan(t.shoppingCart[t.tab].lsItem[o].stt) } else { if (1 === t.shoppingCart[t.tab].customer.ApplyIncentives) { var n = {}; e.get("api/objectCategory/getbyid/" + t.listCustomer1[o].ObjectCategoryID, null, function (a) { if (n = a.data, t.shoppingCart[t.tab].customer.DiscountRateDefault = n.DiscountRateDefault, t.shoppingCart[t.tab].customer.TaxRateDefault = n.TaxRateDefault, e.get("api/pricePolicy/getbyid/" + n.PricePolicyDefault, null, function (e) { t.shoppingCart[t.tab].customer.PricePolicyDefaultName = e.data.PricePolicyName, t.shoppingCart[t.tab].customer.PricePolicyDefault = e.data.PricePolicyID }, function (t) { console.log(t.data) }), e.get("api/paymentSchedule/getbyid/" + n.PaymentScheduleDefault, null, function (e) { t.shoppingCart[t.tab].customer.PaymentScheduleDefaultName = e.data.PaymentScheduleName, t.shoppingCart[t.tab].customer.PaymentScheduleDefault = e.data.PaymentScheduleID }, function (t) { console.log(t.data) }), 1 === n.PaymentMethodDefault ? t.shoppingCart[t.tab].customer.PaymentMethodDefaultName = "Tiền mặt" : (2 === n.PaymentMethodDefault && (t.shoppingCart[t.tab].customer.PaymentMethodDefaultName = "Chuyển khoản"), 3 === n.PaymentMethodDefault && (t.shoppingCart[t.tab].customer.PaymentMethodDefaultName = "COD")), t.shoppingCart[t.tab].lsItem.length > 0) for (var o in t.shoppingCart[t.tab].lsItem) null !== n.TaxRateDefault && (t.shoppingCart[t.tab].lsItem[o].thue = n.TaxRateDefault), "3048ffe8-e2c8-4b43-a8a5-766ad6643a83" === n.PricePolicyDefault.toString() ? t.shoppingCart[t.tab].lsItem[o].unit_price = t.shoppingCart[t.tab].lsItem[o].saleprice : ("f53cecc7-5a7b-44b9-894b-c6b18ac85d49" === n.PricePolicyDefault.toString() && (t.shoppingCart[t.tab].lsItem[o].unit_price = t.shoppingCart[t.tab].lsItem[o].WholesalePrice), "155acc95-47be-4169-a73a-872aec588f54" === n.PricePolicyDefault.toString() && (t.shoppingCart[t.tab].lsItem[o].unit_price = t.shoppingCart[t.tab].lsItem[o].PurchasePrice)), t.TinhToan(t.shoppingCart[t.tab].lsItem[o].stt) }, function (t) { console.log(t.data) }) } if (3 === t.shoppingCart[t.tab].customer.ApplyIncentives || 0 === t.shoppingCart[t.tab].customer.ApplyIncentives || null === t.shoppingCart[t.tab].customer.ApplyIncentives) { var s = {}; e.get("api/account/store", null, function (a) { e.get("api/configStore/getConfig?manageStoreID=" + a.data.ManageStoreID, null, function (a) { if (s = a.data, e.get("api/pricePolicy/getbyid/" + s.SalePricePolicyDefault, null, function (e) { t.shoppingCart[t.tab].customer.PricePolicyDefault = e.data.PricePolicyID, t.shoppingCart[t.tab].customer.PricePolicyDefaultName = e.data.PricePolicyName }, function () { console.log("pricePolicy2") }), e.get("api/paymentSchedule/getbyid/" + s.PaymentScheduleDefault, null, function (e) { t.shoppingCart[t.tab].customer.PaymentScheduleDefault = e.data.PaymentScheduleID, t.shoppingCart[t.tab].customer.PaymentScheduleDefaultName = e.data.PaymentScheduleName }, function () { console.log("paymentSchedule2") }), 1 === s.PaymentMethodDefault ? t.shoppingCart[t.tab].customer.PaymentMethodDefaultName = "Tiền mặt" : (2 === s.PaymentMethodDefault && (t.shoppingCart[t.tab].customer.PaymentMethodDefaultName = "Chuyển khoản"), 3 === s.PaymentMethodDefault && (t.shoppingCart[t.tab].customer.PaymentMethodDefaultName = "COD")), t.shoppingCart[t.tab].customer.TaxRateDefault = s.SaleTaxDefault, t.shoppingCart[t.tab].lsItem.length > 0) for (var o in t.shoppingCart[t.tab].lsItem) null !== s.SaleTaxDefault && (t.shoppingCart[t.tab].lsItem[o].thue = s.SaleTaxDefault), "3048ffe8-e2c8-4b43-a8a5-766ad6643a83" === s.SalePricePolicyDefault.toString() ? t.shoppingCart[t.tab].lsItem[o].unit_price = t.shoppingCart[t.tab].lsItem[o].saleprice : ("f53cecc7-5a7b-44b9-894b-c6b18ac85d49" === s.SalePricePolicyDefault.toString() && (t.shoppingCart[t.tab].lsItem[o].unit_price = t.shoppingCart[t.tab].lsItem[o].WholesalePrice), "155acc95-47be-4169-a73a-872aec588f54" === s.SalePricePolicyDefault.toString() && (t.shoppingCart[t.tab].lsItem[o].unit_price = t.shoppingCart[t.tab].lsItem[o].PurchasePrice)), t.TinhToan(t.shoppingCart[t.tab].lsItem[o].stt) }, function () { console.log("pricePolicy2") }) }, function () { console.log("vendorCategory") }) } } t.listCustomer1 = []; break } } function f() { null !== t.searchText && "" !== t.searchText ? "block" === t.shoppingCart[t.tab].customer.displayDebt ? t.shoppingCart[t.tab].customer.displayDebt = "none" : t.shoppingCart[t.tab].customer.displayDebt = "block" : t.shoppingCart[t.tab].customer.displayDebt = "none" } function T() { "none" === t.displayAdvance1 ? t.displayAdvance1 = "block" : t.displayAdvance1 = "none" } function I() { t.disAdvance = "none", e.get("api/Customer/search?key=" + t.searchText, null, function (e) { t.listCustomer1 = e.data }, function () { console.log("load items failed") }) } function y() { if ("" != t.key) for (var e in t.listItems) t.listItems[e].NameCut = t.limitChar(t.listItems[e].Name, 10), t.key != t.listItems[e].Barcode && t.key != t.listItems[e].SKU || (t.getByID(t.listItems[e]), t.key = "") } function P() { t.check = !0, t.saleOrders.DiscountAmountOC = 0, v() } function A() { t.check = !1, t.saleOrders.DiscountAmountOC = 0, v() } function N() { $(".x1").prop("disabled", !1), $("#pt1").prop("disabled", !1), $("#pt2").prop("disabled", !1), at = 0, et = null, t.vnd = "", t.pt = "", t.saleOrders = { TotalAmountOC: 0, TotalVATAmountOC: 0, TotalDiscountAmountOC: 0, DiscountAmountOC: 0 }, t.TongThanhToan = 0, t.TienKhachDua = 0, t.TraLaiKhach = 0, t.TraLaiKhach_demo = 0, t.shoppingCart[t.tab] = { lsItem: [], customer: { ObjectID: "77ffeb25-befb-4996-bfe4-dcb3a6646f0a", ObjectName: "Khách vãng lai" }, Employee: t.authentication.userName }, t.key = "", t.searchText = "", t.listCustomer1 = [], t.disAdvance = "none", J = !1, t.listNew = [], t.listSalesPromotionNew = [] } function S(e) { void 0 === Number(O(t.shoppingCart[t.tab].lsItem[e - 1].unit_price)) ? t.shoppingCart[t.tab].lsItem[e - 1].unit_price = "0" : t.shoppingCart[t.tab].lsItem[e - 1].unit_price = C(O(t.shoppingCart[t.tab].lsItem[e - 1].unit_price.toString())), t.shoppingCart[t.tab].lsItem[e - 1].thanhtien = Number(O(t.shoppingCart[t.tab].lsItem[e - 1].unit_price)) * t.shoppingCart[t.tab].lsItem[e - 1].quan - Number(O(t.shoppingCart[t.tab].lsItem[e - 1].chietkhau)), t.saleOrders.DiscountAmountOC = Number(O(t.saleOrders.DiscountAmountOC)), 0 == Number(O(t.saleOrders.DiscountAmountOC)) ? v() : _(), t.TienTraLai(), F() } function _() { if (Number(O(t.saleOrders.DiscountAmountOC)) >= 0 || Number(O(t.saleOrders.DiscountAmountOC)) <= 9) if (0 == Number(O(t.saleOrders.DiscountAmountOC))) v(); else { t.saleOrders.discount_default = 0, null !== t.searchText && "" !== t.searchText && (t.saleOrders.discount_default = t.shoppingCart[t.tab].customer.DiscountRateDefault * t.saleOrders.TotalAmountOC / 100), 0 == t.check ? (Number(O(t.saleOrders.DiscountAmountOC)) > 100 && (t.saleOrders.DiscountAmountOC = "100"), Number(O(t.saleOrders.DiscountAmountOC)) <= 0 && (t.saleOrders.DiscountAmountOC = "0"), t.saleOrders.DiscountAmountOC = t.saleOrders.TotalAmountOC * Number(O(t.saleOrders.DiscountAmountOC)) / 100) : t.saleOrders.DiscountAmountOC = C(t.saleOrders.DiscountAmountOC), t.saleOrders.TotalDiscountAmountOC = 0, t.saleOrders.TotalVATAmountOC = 0, t.saleOrders.TotalAmountOC = 0; for (var e in t.shoppingCart[t.tab].lsItem) t.saleOrders.TotalAmountOC = t.saleOrders.TotalAmountOC + t.shoppingCart[t.tab].lsItem[e].thanhtien, t.saleOrders.TotalDiscountAmountOC = t.saleOrders.TotalDiscountAmountOC - -Number(O(t.shoppingCart[t.tab].lsItem[e].chietkhau)); t.saleOrders.TotalDiscountAmountOC = t.saleOrders.TotalDiscountAmountOC - -Number(O(t.saleOrders.DiscountAmountOC)) + t.saleOrders.discount_default; for (var e in t.shoppingCart[t.tab].lsItem) { var a = t.shoppingCart[t.tab].lsItem[e].thanhtien / t.saleOrders.TotalAmountOC * Number(O(t.saleOrders.DiscountAmountOC)); t.saleOrders.TotalVATAmountOC = t.saleOrders.TotalVATAmountOC - -(t.shoppingCart[t.tab].lsItem[e].thanhtien - a) * (t.shoppingCart[t.tab].lsItem[e].thue / 100) } t.TongThanhToan = t.saleOrders.TotalAmountOC + t.saleOrders.TotalVATAmountOC - Number(O(t.saleOrders.DiscountAmountOC)) - t.saleOrders.discount_default, t.TienKhachDua = C(t.TongThanhToan), 0 == t.check && (t.saleOrders.DiscountAmountOC = Number(O(t.saleOrders.DiscountAmountOC)) / t.saleOrders.TotalAmountOC * 100) } else t.saleOrders.DiscountAmountOC = 0; J = !1, at = t.saleOrders.TotalDiscountAmountOC } function v() { t.saleOrders.discount_default = 0, t.saleOrders.TotalAmountOC = 0, t.saleOrders.TotalVATAmountOC = 0, t.saleOrders.TotalDiscountAmountOC = 0; for (var e in t.shoppingCart[t.tab].lsItem) t.saleOrders.TotalAmountOC = t.saleOrders.TotalAmountOC + t.shoppingCart[t.tab].lsItem[e].thanhtien, t.saleOrders.TotalVATAmountOC = t.saleOrders.TotalVATAmountOC + t.shoppingCart[t.tab].lsItem[e].thanhtien * t.shoppingCart[t.tab].lsItem[e].thue / 100, t.saleOrders.TotalDiscountAmountOC = t.saleOrders.TotalDiscountAmountOC - -Number(O(t.shoppingCart[t.tab].lsItem[e].chietkhau)); null !== t.searchText && "" !== t.searchText && (t.saleOrders.discount_default = t.shoppingCart[t.tab].customer.DiscountRateDefault * t.saleOrders.TotalAmountOC / 100), 0 == t.check && (t.saleOrders.DiscountAmountOC = t.saleOrders.TotalAmountOC * Number(O(t.saleOrders.DiscountAmountOC)) / 100), t.TongThanhToan = t.saleOrders.TotalAmountOC - -t.saleOrders.TotalVATAmountOC - Number(O(t.saleOrders.DiscountAmountOC)) - t.saleOrders.discount_default, t.saleOrders.TotalDiscountAmountOC = t.saleOrders.TotalDiscountAmountOC - -Number(O(t.saleOrders.DiscountAmountOC)) + t.saleOrders.discount_default, t.TienKhachDua = C(t.TongThanhToan), J = !1 } function x() { t.shoppingCart[t.tab].customer.selectDebt === !0 ? (t.shoppingCart[t.tab].customer.debt_demo = t.shoppingCart[t.tab].customer.debt_demo - O(t.TraLaiKhach_demo), t.TraLaiKhach_demo = t.TraLaiKhach_demo - t.shoppingCart[t.tab].customer.Debt, t.TraLaiKhach_demo <= 0 ? (t.TraLaiKhach_demo = 0, t.shoppingCart[t.tab].customer.debt = t.TraLaiKhach) : (t.shoppingCart[t.tab].customer.debt_demo = 0, t.shoppingCart[t.tab].customer.debt = t.shoppingCart[t.tab].customer.Debt)) : (t.shoppingCart[t.tab].customer.debt_demo = t.shoppingCart[t.tab].customer.Debt, t.TraLaiKhach_demo = t.TraLaiKhach) } function V(e) { if (e.quantity <= 0) a.displayWarning("Sản phẩm tạm thời hết hàng!"); else { var o = e; if (0 == t.shoppingCart[t.tab].lsItem.length) o.quan = 1, o.stt = 1, o.display_discount = "none", o.txt_discount_item = "0", o.status_discount = !0, o.chietkhau = 0, o.thue = 0, o.unit_price = o.saleprice, null !== t.searchText && "" !== t.searchText && ("3048ffe8-e2c8-4b43-a8a5-766ad6643a83" === t.shoppingCart[t.tab].customer.PricePolicyDefault.toString() ? o.unit_price = o.saleprice : ("f53cecc7-5a7b-44b9-894b-c6b18ac85d49" === t.shoppingCart[t.tab].customer.PricePolicyDefault.toString() && (o.unit_price = o.WholesalePrice), "155acc95-47be-4169-a73a-872aec588f54" === t.shoppingCart[t.tab].customer.PricePolicyDefault.toString() && (o.unit_price = o.PurchasePrice)), o.thue = t.shoppingCart[t.tab].customer.TaxRateDefault), o.unit_price = C(O(o.unit_price)), o.thanhtien = Number(O(o.unit_price)) * o.quan - o.chietkhau, t.shoppingCart[t.tab].lsItem.push(o); else { var n = -1, s = 1; for (var i in t.shoppingCart[t.tab].lsItem) t.shoppingCart[t.tab].lsItem[i].ID == o.ID && (n = i), s++; -1 == n ? (o.quan = 1, o.stt = s, o.display_discount = "none", o.status_discount = !0, o.txt_discount_item = "0", o.chietkhau = 0, o.thue = 0, o.unit_price = o.saleprice, null !== t.searchText && "" !== t.searchText && ("3048ffe8-e2c8-4b43-a8a5-766ad6643a83" === t.shoppingCart[t.tab].customer.PricePolicyDefault.toString() ? o.unit_price = o.saleprice : ("f53cecc7-5a7b-44b9-894b-c6b18ac85d49" === t.shoppingCart[t.tab].customer.PricePolicyDefault.toString() && (o.unit_price = o.WholesalePrice), "155acc95-47be-4169-a73a-872aec588f54" === t.shoppingCart[t.tab].customer.PricePolicyDefault.toString() && (o.unit_price = o.PurchasePrice)), o.thue = t.shoppingCart[t.tab].customer.TaxRateDefault), o.unit_price = C(O(o.unit_price)), o.thanhtien = Number(O(o.unit_price)) * o.quan - o.chietkhau, t.shoppingCart[t.tab].lsItem.push(o)) : (t.shoppingCart[t.tab].lsItem[n].quan++, t.shoppingCart[t.tab].lsItem[n].thanhtien = Number(O(t.shoppingCart[t.tab].lsItem[n].unit_price)) * t.shoppingCart[t.tab].lsItem[n].quan - t.shoppingCart[t.tab].lsItem[n].chietkhau) } t.saleOrders.DiscountAmountOC = Number(O(t.saleOrders.DiscountAmountOC)), 0 === Number(O(t.saleOrders.DiscountAmountOC)) ? t.TinhTong() : t.TinhTong2(), t.TienTraLai(), J = !1 } } function K(o, n) { if (o < t.shoppingCart[t.tab].lsItem.length) t.saleOrdersDetail.VoucherID = n.VoucherID, t.saleOrdersDetail.ItemID = t.shoppingCart[t.tab].lsItem[o].ID, t.saleOrdersDetail.Quantity = t.shoppingCart[t.tab].lsItem[o].quan, t.saleOrdersDetail.QuantityConvert = t.saleOrdersDetail.Quantity, t.saleOrdersDetail.UnitPriceOC = Number(O(t.shoppingCart[t.tab].lsItem[o].unit_price)), t.saleOrdersDetail.UnitPrice = t.saleOrdersDetail.UnitPriceOC, t.saleOrdersDetail.UnitPriceConvertOC = t.saleOrdersDetail.UnitPriceOC, t.saleOrdersDetail.UnitPriceConvert = t.saleOrdersDetail.UnitPriceOC, t.saleOrdersDetail.AmountOC = t.shoppingCart[t.tab].lsItem[o].thanhtien, t.saleOrdersDetail.Amount = t.saleOrdersDetail.AmountOC, t.saleOrdersDetail.DiscountReason = t.shoppingCart[t.tab].lsItem[o].DiscountReason, t.saleOrdersDetail.DiscountAmountOC = Number(O(t.shoppingCart[t.tab].lsItem[o].chietkhau)), t.saleOrdersDetail.DiscountAmount = t.saleOrdersDetail.DiscountAmountOC, t.saleOrdersDetail.DiscountRate = t.saleOrdersDetail.DiscountAmountOC / (t.saleOrdersDetail.Quantity * t.saleOrdersDetail.UnitPrice) * 100, t.saleOrdersDetail.VATRate = t.shoppingCart[t.tab].lsItem[o].thue, t.saleOrdersDetail.VATAmountOC = t.saleOrdersDetail.AmountOC * t.saleOrdersDetail.VATRate / 100, t.saleOrdersDetail.VATAmount = t.saleOrdersDetail.VATAmountOC, t.saleOrdersDetail.OutwardPrice = t.saleOrdersDetail.UnitPriceOC, t.saleOrdersDetail.OutwardAmount = t.saleOrdersDetail.AmountOC, t.saleOrdersDetail.SpecialConsumeTaxRate = 0, t.saleOrdersDetail.SpecialConsumeTaxAmountOC = 0, t.saleOrdersDetail.SpecialConsumeTaxAmount = 0, t.saleOrdersDetail.SpecialConsumeUnitPriceOC = 0, t.saleOrdersDetail.SpecialConsumeUnitPrice = 0, t.saleOrdersDetail.ConvertRate = 0, t.saleOrdersDetail.UnitPriceAfterTaxOC = 0, t.saleOrdersDetail.UnitPriceAfterTax = 0, t.saleOrdersDetail.AmountAfterTaxOC = 0, t.saleOrdersDetail.AmountAfterTax = 0, t.saleOrdersDetail.DiscountAmountAfterTax = 0, t.saleOrdersDetail.DiscountAmountAfterTaxOC = 0, t.saleOrdersDetail.OutwardPriceConvert = 0, e.post("api/saleOrderDetail/create", t.saleOrdersDetail, function () { e.get("api/positem/getbyid/" + t.saleOrdersDetail.ItemID, null, function (s) { t.itemOption = s.data, t.itemOption.ClosingQuantity = t.itemOption.ClosingQuantity - t.shoppingCart[t.tab].lsItem[o].quan, t.stock = { StockID: "00000000-0000-0000-0000-000000000000", ItemOptionID: t.shoppingCart[t.tab].lsItem[o].ID, BranchID: t.account.BranchID, Quantity: t.shoppingCart[t.tab].lsItem[o].quan, InitialInventory: 0 }, e.put("api/stock/update", t.stock, function () { }), e.put("api/positem/update", t.itemOption, function () { K(o + 1, n) }, function (t) { a.displayError(t.data) }) }, function (t) { a.displayError(t.data) }) }, function () { a.displayError("Thêm mới không thành công.") }); else { a.displaySuccess("Đơn hàng đã được thêm mới."), t.saleOrders.VoucherID = n.VoucherID, t.saleOrders.VoucherDate = n.VoucherDate; var s = { BranchID: t.saleOrders.BranchID, voucherID: t.saleOrders.VoucherID }; e.put("api/stock/updateClosingQuantityStockCombo", s), e.get("api/itemOption/AutoComplete?BranchID=" + t.account.BranchID, null, function (e) { t.listItems = e.data; for (var a in t.listItems) t.listItems[a].NameCut = t.limitChar(t.listItems[a].Name, 10) }), t.clear() } } function B() { var o = 0; for (i in t.shoppingCart[t.tab].lsItem) { if (t.shoppingCart[t.tab].lsItem[i].quan > t.shoppingCart[t.tab].lsItem[i].quantity) { o = 0; break } o = 1 } 1 == o ? t.shoppingCart[t.tab].lsItem != [] && (0 == t.check && (t.saleOrders.DiscountAmountOC = t.saleOrders.TotalAmountOC * Number(O(t.saleOrders.DiscountAmountOC)) / 100 + t.saleOrders.discount_default), Number(O(t.TienKhachDua)) >= Number(O(t.TongThanhToan)) ? t.saleOrders.StatusID = 1 : Number(O(t.TienKhachDua)) < Number(O(t.TongThanhToan)) && (t.saleOrders.StatusID = 15, t.saleOrders.Debt = !0), t.saleOrders.IsShowUnitConvert = !0, t.saleOrders.IsAttachList = !0, t.saleOrders.CommisionAmount = 0, t.saleOrders.CommisionAmountOC = 0, t.saleOrders.SortOrder = 0, t.saleOrders.ShippingAmount = 0, t.saleOrders.VoucherType = 12, t.saleOrders.VoucherDate = new Date, t.saleOrders.BranchID = t.account.BranchID, t.saleOrders.IsPosted = !0, t.saleOrders.TotalOutwardAmount = 0, t.saleOrders.TotalVATAmount = t.saleOrders.TotalVATAmountOC, t.saleOrders.TotalDiscountAmount = t.saleOrders.TotalDiscountAmountOC, t.saleOrders.TotalAmount = t.saleOrders.TotalAmountOC, t.saleOrders.DiscountAmountOC = Number(O(t.saleOrders.DiscountAmountOC)) + t.saleOrders.discount_default, t.saleOrders.DiscountAmount = t.saleOrders.DiscountAmountOC, t.saleOrders.DiscountRate = Number(O(t.saleOrders.DiscountAmountOC)) / t.saleOrders.TotalAmountOC * 100, t.saleOrders.ObjectID = t.shoppingCart[t.tab].customer.ObjectID, t.saleOrders.Employee = t.shoppingCart[t.tab].Employee, t.saleOrders.PromotionID = tt, null !== tt && e.put("api/salespromotion/UpdateInventory?ID=" + tt), null !== t.searchText && "" !== t.searchText ? e.post("api/saleOrder/create", t.saleOrders, function (a) { var o = {}; o = a.data, null !== t.searchText && "" !== t.searchText && (t.shoppingCart[t.tab].customer.selectDebt === !0 && O(t.TienKhachDua) > t.TongThanhToan && e.get("api/Customer/getbyid/" + t.saleOrders.ObjectID, null, function (a) { t.AddReceipt(O(t.TongThanhToan), o.VoucherNo); var n = {}; n = a.data, n.Debt = t.shoppingCart[t.tab].customer.debt_demo, e.put("api/Customer/update", n, function () { console.log("Đã tăng công nợ") }, function () { console.log("") }) }, function () { console.log("Éo tăng được công nợ") }), O(t.TienKhachDua) <= t.TongThanhToan && t.shoppingCart[t.tab].customer.selectDebt === !1 && e.get("api/Customer/getbyid/" + t.saleOrders.ObjectID, null, function (a) { t.AddReceipt(O(t.TienKhachDua), o.VoucherNo); var n = {}; n = a.data, n.Debt = n.Debt - t.TraLaiKhach, e.put("api/Customer/update", n, function () { console.log("Đã tăng công nợ") }, function () { console.log("") }) }, function () { console.log("Éo tăng được công nợ") }), O(t.TienKhachDua) > t.TongThanhToan && t.shoppingCart[t.tab].customer.selectDebt === !1 && t.AddReceipt(O(t.TongThanhToan), o.VoucherNo), O(t.TienKhachDua) <= t.TongThanhToan && t.shoppingCart[t.tab].customer.selectDebt === !0 && e.get("api/Customer/getbyid/" + t.saleOrders.ObjectID, null, function (a) { t.AddReceipt(O(t.TienKhachDua), o.VoucherNo); var n = {}; n = a.data, n.Debt = n.Debt - t.shoppingCart[t.tab].customer.debt_demo, e.put("api/Customer/update", n, function () { console.log("Đã tăng công nợ") }, function () { console.log("") }) }, function () { console.log("Éo tăng được công nợ") }), K(0, a.data), t.date = a.data.VoucherDate.substring(0, 10)) }, function () { a.displayError("Thêm mới không thành công.") }) : O(t.TienKhachDua) >= t.TongThanhToan ? e.post("api/saleOrder/create", t.saleOrders, function (e) { var a = {}; a = e.data, t.AddReceipt(O(t.TongThanhToan), a.VoucherNo), K(0, e.data), t.date = e.data.VoucherDate.substring(0, 10) }, function () { a.displayError("Thêm mới không thành công.") }) : a.displayWarning("Khách hàng phát sinh công nợ. Cần cập nhật thông tin khách hàng !!")) : a.displayWarning("Số lượng " + t.shoppingCart[t.tab].lsItem[i].Name + " bán ra lớn hơn số lượng hàng tồn trong kho vui lòng nhập hàng thêm để bán !!") } function E(o, n) { if (o > 0) { var s = {}; s.ObjectID = t.saleOrders.ObjectID, s.BranchID = t.saleOrders.BranchID, s.OriginalVoucherNo = n, s.VoucherType = 20, s.StatusID = 0, s.VoucherDate = new Date, s.TotalAmount = o, s.TotalAmountOC = o, s.Description = "Phiếu thu tiền tự động tạo từ đơn hàng " + n, e.post("api/saleOrder/create_receipt", s, function () { if (t.shoppingCart[t.tab].customer.selectDebt === !0 && O(t.TienKhachDua) > t.TongThanhToan) { var a = {}; a.ObjectID = t.saleOrders.ObjectID, a.OriginalVoucherNo = "Công nợ khách hàng", a.VoucherType = 23, a.StatusID = 0, a.VoucherDate = new Date, a.TotalAmount = t.shoppingCart[t.tab].customer.debt, a.TotalAmountOC = t.shoppingCart[t.tab].customer.debt, a.Description = "Phiếu thu tiền công nợ của khách hàng được tự động tạo từ đơn hàng " + n, e.post("api/saleOrder/create_receipt", a, function () { }, function () { }) } 1 == Y && t.PrintDiv(), Y = !0 }, function () { console.log("éo tạo đk phiếu thu") }) } else a.displayWarning("Số tiền phải lớn hơn 0đ") } function R() { Y = !1, t.AddSaleOrders() } function L() { var t = document.getElementById("dvContents").innerHTML, e = document.createElement("iframe"); e.name = "frame1", e.style.position = "absolute", e.style.top = "-1000000px", document.body.appendChild(e); var a = e.contentWindow ? e.contentWindow : e.contentDocument.document ? e.contentDocument.document : e.contentDocument; return a.document.open(), a.document.write("<html><head><title>Tiktac.vn</title>"), a.document.write("</head><body>"), a.document.write(t), a.document.write("</body></html>"), a.document.close(), setTimeout(function () { window.frames.frame1.focus(), window.frames.frame1.print(), document.body.removeChild(e) }, 500), Y = !0, !1 } function M() { e.get("api/itemCategory/getall", null, function (e) { t.listItemCategory = e.data }, function () { console.log("load items failed") }) } function q(a) { e.get("api/itemOption/getbyitemcategoryid/" + a, null, function (e) { t.listItems = e.data; for (var a in e.data) t.listItems[a].NameCut = t.limitChar(t.listItems[a].Name, 10), t.listItems[a].saleprice = t.listItems[a].SalePrice, t.listItems[a].image1 = t.listItems[a].Image1 }, function () { console.log("load items failed") }) } function U() { e.get("api/Customer/getall", null, function (e) { t.listCustomer = e.data }, function () { console.log("load items failed") }) } function W() { 1 == t.frmAddCustomer.$valid ? (console.log("da"), e.post("api/Customer/create", t.customers, function (t) { a.displaySuccess(t.data.ObjectCode + " đã được thêm mới.") }, function () { a.displayError("Thêm mới không thành công.") })) : a.displayWarning("Nhập đầy đủ các trương có dấu chấm đỏ") } function Q() { e.get("api/posObjectCategory/getall", null, function (e) { t.listObjectCategory = e.data }, function () { console.log("load items failed") }) } function H() { e.get("api/employee/getall", null, function (e) { t.listGetEmployee = e.data }, function () { console.log("load items failed") }), e.get("api/Customer/getCustomerCode", null, function (e) { t.customers.ObjectCode = e.data }, function () { console.log("load items failed") }) } function F() { J = !1 } function z() { 0 == J && e.get("api/salespromotiondetail/getall", null, function (a) { t.listSalesPromotionDetail = a.data, t.listSalesPromotionNew = [], t.listNew = []; for (i in t.listSalesPromotionDetail) if (0 == t.listSalesPromotionDetail[i].PromotionType) t.listSalesPromotionDetail[i].ConditionsMin <= t.TongThanhToan && t.TongThanhToan <= t.listSalesPromotionDetail[i].ConditionsMax ? t.listSalesPromotionNew.push(t.listSalesPromotionDetail[i]) : (t.disPr = "none !impo rtant", t.disPr1 = "block !important"); else for (j in t.shoppingCart[t.tab].lsItem) t.listSalesPromotionDetail[i].ItemID == t.shoppingCart[t.tab].lsItem[j].ID && t.listSalesPromotionDetail[i].QuantityItem <= t.shoppingCart[t.tab].lsItem[j].quan && t.listSalesPromotionNew.push(t.listSalesPromotionDetail[i]); e.get("api/salespromotion/getall/", null, function (e) { t.listSalesPromotion = e.data; var a, o = 0; for (k in t.listSalesPromotionNew) for (l in t.listSalesPromotion) a = new Date(t.listSalesPromotion[l].CreateDate), t.listSalesPromotionNew[k].VoucherID == t.listSalesPromotion[l].VoucherID && 1 == t.listSalesPromotion[l].Status && t.listSalesPromotion[l].ApplyQuantity > 0 && Z >= a && (t.listNew[o] = {}, t.listNew[o].ApplyQuantity = t.listSalesPromotion[l].ApplyQuantity, t.listNew[o].BranchID = t.listSalesPromotion[l].BranchID, t.listNew[o].CreateDate = t.listSalesPromotion[l].CreateDate, t.listNew[o].Description = t.listSalesPromotion[l].Description, t.listNew[o].Expirydate = t.listSalesPromotion[l].Expirydate, t.listNew[o].PromotionName = t.listSalesPromotion[l].PromotionName, t.listNew[o].PromotionValue = t.listSalesPromotionNew[k].PromotionValue, t.listNew[o].Object = t.listSalesPromotion[l].Object, t.listNew[o].Status = t.listSalesPromotion[l].Status, t.listNew[o].VoucherDate = t.listSalesPromotion[l].VoucherDate, t.listNew[o].VoucherID = t.listSalesPromotion[l].VoucherID, t.listNew[o].VoucherNo = t.listSalesPromotion[l].VoucherNo, t.listNew[o].VoucherTypeDetail = t.listSalesPromotionNew[k].VoucherType, t.listNew[o].VoucherType = t.listSalesPromotion[l].VoucherType, 0 == t.listSalesPromotion[l].VoucherType ? t.listNew[o].VoucherType1 = "CK Σ đơn hàng" : t.listNew[o].VoucherType1 = "CK từng hàng hóa", o++); if (t.listNew.length >= 1) for (var n = 0; n < t.listNew.length; n++) for (var s = n + 1; s < t.listNew.length; s++) t.listNew[n].VoucherID == t.listNew[s].VoucherID && t.listNew.splice(s, 1); 0 !== t.listNew.length && (t.disPr = "block !important", t.disPr1 = "none !important"), J = !0, X = parseInt(Number(O(t.saleOrders.DiscountAmountOC))) }) }, function () { console.log("load items failed") }) } function G(n, s, i, r, l) {
            if (t.saleOrders.TotalDiscountAmountOC = at, tt = r, $(".x1").prop("disabled", !0), $("#pt1").prop("disabled", !0), $("#pt2").prop("disabled", !0), 1 == t.check ? (t.vnd = "", t.pt = "none") : (t.vnd = "none", t.pt = ""), et !== r) {
                var u = 0, c = 0, m = 0, p = 0; for (w in t.shoppingCart[t.tab].lsItem) t.shoppingCart[t.tab].lsItem[w].chietkhau = 0, t.shoppingCart[t.tab].lsItem[w].thanhtien = t.shoppingCart[t.tab].lsItem[w].quan * Number(O(t.shoppingCart[t.tab].lsItem[w].unit_price)), u += t.shoppingCart[t.tab].lsItem[w].thanhtien; t.saleOrders.TotalAmountOC = u, t.TongThanhToan = u, 0 == l ? null !== n ? (dateend = new Date(n), dateend < Z ? a.displayWarning("Khuyến mại hết hạn") : 1 == s ? (c = Number(t.saleOrders.TotalDiscountAmountOC) + i, m = t.saleOrders.TotalAmountOC * c / 100, t.TongThanhToan -= m, t.saleOrders.TotalDiscountAmountOC = m, t.TienKhachDua = t.TongThanhToan) : (c = Number(t.saleOrders.TotalDiscountAmountOC) + i, m = c, t.TongThanhToan -= m, t.saleOrders.TotalDiscountAmountOC = m, t.TienKhachDua = t.TongThanhToan)) : 1 == s ? (c = Number(t.saleOrders.TotalDiscountAmountOC) + i, m = t.saleOrders.TotalAmountOC * c / 100, t.TongThanhToan -= m, t.saleOrders.TotalDiscountAmountOC = m, t.TienKhachDua = t.TongThanhToan) : (c = Number(t.saleOrders.TotalDiscountAmountOC) + i, m = c, t.TongThanhToan -= m, t.saleOrders.TotalDiscountAmountOC = m, t.TienKhachDua = t.TongThanhToan) : null !== n ? (dateend = new Date(n), dateend < Z ? a.displayWarning("Khuyến mại hết hạn") : e.get("api/salespromotiondetail/getbyid/" + r, null, function (e) { t.SalesPromotionTemporary = e.data; for (k in t.shoppingCart[t.tab].lsItem) for (o in t.SalesPromotionTemporary) t.shoppingCart[t.tab].lsItem[k].ID == t.SalesPromotionTemporary[o].ItemID && (1 == t.SalesPromotionTemporary[o].VoucherType ? (c = Number(O(t.shoppingCart[t.tab].lsItem[k].chietkhau)) + t.SalesPromotionTemporary[o].PromotionValue, m = t.shoppingCart[t.tab].lsItem[k].thanhtien * c / 100, t.shoppingCart[t.tab].lsItem[k].thanhtien = t.shoppingCart[t.tab].lsItem[k].thanhtien - m, t.shoppingCart[t.tab].lsItem[k].chietkhau = m, p += m) : (c = Number(O(t.shoppingCart[t.tab].lsItem[k].chietkhau)) + t.SalesPromotionTemporary[o].PromotionValue, m = t.shoppingCart[t.tab].lsItem[k].thanhtien - c, t.shoppingCart[t.tab].lsItem[k].chietkhau = c, t.shoppingCart[t.tab].lsItem[k].thanhtien = m, p += c)); t.saleOrders.TotalDiscountAmountOC = p, t.TongThanhToan -= p, t.TienKhachDua = t.TongThanhToan })) : e.get("api/salespromotiondetail/getbyid/" + r, null, function (e) {
                    t.SalesPromotionTemporary = e.data; for (k in t.shoppingCart[t.tab].lsItem) for (o in t.SalesPromotionTemporary) t.shoppingCart[t.tab].lsItem[k].ID == t.SalesPromotionTemporary[o].ItemID && (1 == t.SalesPromotionTemporary[o].VoucherType ? (c = Number(O(t.shoppingCart[t.tab].lsItem[k].chietkhau)) + t.SalesPromotionTemporary[o].PromotionValue, m = t.shoppingCart[t.tab].lsItem[k].thanhtien * c / 100, t.shoppingCart[t.tab].lsItem[k].thanhtien = t.shoppingCart[t.tab].lsItem[k].thanhtien - m, t.shoppingCart[t.tab].lsItem[k].chietkhau = m, p += m) : (c = Number(O(t.shoppingCart[t.tab].lsItem[k].chietkhau)) + t.SalesPromotionTemporary[o].PromotionValue,
                    m = t.shoppingCart[t.tab].lsItem[k].thanhtien - c, t.shoppingCart[t.tab].lsItem[k].chietkhau = c, t.shoppingCart[t.tab].lsItem[k].thanhtien = m, p += c)); t.saleOrders.TotalDiscountAmountOC = p, t.TongThanhToan -= p, t.TienKhachDua = t.TongThanhToan
                }), et = r
            }
        } t.chooseTab = c, t.tab = 0, t.dp = ["block", "none", "none", "none", "none", "none"], t.dp2 = ["block", "none", "none", "none", "none", "none"], t.lf = ["10px", "112px", "225px", "338px", "450px", "565px"], t.lf1 = ["10px", "112px", "225px", "338px", "450px", "565px"], t.stype = ["", "", "", "", "", ""], t.selectForm = u, t.formView = {}; var J = !1, X = 0; t.showPromotion = r, t.selectForm(), t.discount_item_Click = m, t.changeDiscount_txt = p, t.changeStatusDiscount = h, t.ApplyDiscount = d, t.account = {}, t.getItems = g, t.listItems = [], g(), t.closeTab = function (e) { n.confirm("Bạn muốn xóa đơn hàng này?").then(function () { t.clear(); for (var a, o = 0; o < t.dp.length; o++) "block" == t.dp[o] && (a = o); if (t.dp[e] = "none", e == a) { for (var o = 0; o < t.dp.length; o++) "block" == t.dp[o] && (a = o); t.chooseTab(a) } else { for (var n, o = e; o < t.dp.length; o++) if ("block" == t.dp[o]) { n = o; break } t.chooseTab(n); for (var s = -1, o = 0; o < t.dp.length; o++) "block" == t.dp[o] && (s++, t.lf[o] = t.lf1[s]) } }) }, t.addTab = function () { for (var e = 0; e < t.dp.length; e++) if ("none" == t.dp[e]) { t.dp[e] = "block", t.chooseTab(e); break } for (var a = -1, e = 0; e < t.dp.length; e++) "block" == t.dp[e] && (a++, t.lf[e] = t.lf1[a]) }, t.itemOption = { Status: !0 }, t.AddSaleOrders = B, t.AddReceipt = E, t.selectDebt = !1, t.getItemCategory = M, t.listItemCategory = [], t.getItemOptionByItemCategory = q, t.saleOrders = { TotalAmountOC: 0, TotalVATAmountOC: 0, TotalDiscountAmountOC: 0, DiscountAmountOC: 0, VoucherType: 12, discount_default: 0 }, t.saleOrdersDetail = {}, t.listCustomer1 = [], t.shoppingCart = [{ lsItem: [], customer: { ObjectID: "77ffeb25-befb-4996-bfe4-dcb3a6646f0a", ObjectName: "Khách vãng lai" }, Employee: t.authentication.userName }, { lsItem: [], customer: { ObjectID: "77ffeb25-befb-4996-bfe4-dcb3a6646f0a", ObjectName: "Khách vãng lai" }, Employee: t.authentication.userName }, { lsItem: [], customer: { ObjectID: "77ffeb25-befb-4996-bfe4-dcb3a6646f0a", ObjectName: "Khách vãng lai" }, Employee: t.authentication.userName }, { lsItem: [], customer: { ObjectID: "77ffeb25-befb-4996-bfe4-dcb3a6646f0a", ObjectName: "Khách vãng lai" }, Employee: t.authentication.userName }, { lsItem: [], customer: { ObjectID: "77ffeb25-befb-4996-bfe4-dcb3a6646f0a", ObjectName: "Khách vãng lai" }, Employee: t.authentication.userName }, { lsItem: [], customer: { ObjectID: "77ffeb25-befb-4996-bfe4-dcb3a6646f0a", ObjectName: "Khách vãng lai" }, Employee: t.authentication.userName }], t.TienKhachDua = 0, t.TraLaiKhach = 0, t.TraLaiKhach_demo = 0, t.TongThanhToan = 0, t.getByID = V, t.clear = N, t.TinhTong = v, t.TinhTong2 = _, t.TinhToan = S, t.AddSaleOrdersDetail = K, t.PrintDiv = L, t.AddSaleOrders1 = R, t.ChooseVND = P, t.Choose = A, t.check = !0; var Y = !0; t.key = ""; t.TimKiem = y, t.search = I, t.searchText = "", t.ChooseCustomer = D, t.Currency = C, t.ConvertNumber = O, t.limitChar = b, t.disAdvance = "none", t.DisplayDebt = f, t.displayAdvance1 = "none", t.AdvanceSettingClick = T, t.TienTraLai = function () { var e = new String(t.TienKhachDua); e[e.length - 1] >= 0 || e[e.length - 1] <= 9 ? (t.TienKhachDua = C(O(t.TienKhachDua)), t.TraLaiKhach = Number(O(t.TienKhachDua)) - Number(t.TongThanhToan), t.TraLaiKhach_demo = t.TraLaiKhach) : (t.TienKhachDua = 0, t.TraLaiKhach = 0, t.TraLaiKhach_demo = t.TraLaiKhach) }, t.UpdateDebt = x, t.printElement = function (t) { var e = t.cloneNode(!0), a = document.getElementById("printSection"); if (!a) { var a = document.createElement("div"); a.id = "printSection", document.body.appendChild(a) } a.innerHTML = "", a.appendChild(e) }, t.del = function (e) { t.listSalesPromotionNew = [], e = !1, t.shoppingCart[t.tab].lsItem.splice(e - 1, 1); for (var a = 0; a < t.shoppingCart[t.tab].lsItem.length; a++) t.shoppingCart[t.tab].lsItem[a].stt = a + 1, t.shoppingCart[t.tab].lsItem[a].display_discount = "none"; 0 == Number(O(t.saleOrders.DiscountAmountOC)) ? v() : (Number(O(t.saleOrders.DiscountAmountOC)) > t.TongThanhToan && (t.saleOrders.DiscountAmountOC = 0), _()) }, t.customers = { ObjectCode: null, ObjectName: null, ObjectAddress: null, ObjectCategoryID: null, ObjectKind: 2, Tel: null, Email: null, Debt: 0, AccumulativePoint: 0, Status: !0, BankAccount: null, BankName: null, TaxCode: null, CaringStaff: null, Sex: null, Description: null }, t.listObjectCategory = [], t.getObjectCategory = Q, t.getEmployee = H, t.getcustomer = U, t.AddCustomers = W, t.mediate = "", t.sttpromotion = F, t.getSalesPromotion = z, t.CalculatePromotion = G, t.listSalesPromotion = [], t.listSalesPromotionDetail = []; var Z = new Date, tt = null, et = null, at = 0; t.getcustomer(), t.getObjectCategory(), t.getEmployee(), t.getItemCategory()
    } t.controller("posOrderController", e), e.$inject = ["$scope", "apiService", "notificationService", "$ngBootbox", "$compile"]
}(angular.module("tiktak"));