!function (t) { function a(t, a, e, n, i, o, l) { function d() { l.get("api/account/users", null, function (t) { "" == t.data.Avatar || null == t.data.Avatar ? i.authentication.avatar = "../../../Assets/admin/img/lydosdpm.png" : i.authentication.avatar = t.data.Avatar, i.authentication.storeName = t.data.StoreName, i.authentication.phoneNumber = t.data.PhoneNumber, i.authentication.address = t.data.Address, i.authentication.fullName = t.data.FullName, i.authentication.UserName = t.data.UserName, i.authentication.Email = t.data.Email, i.authentication.BirthDay = t.data.BirthDay, i.authentication.Id = t.data.Id, i.authentication.BranchID = t.data.BranchID, l.get("api/branch/getbyid/" + i.authentication.BranchID, null, function (t) { i.authentication.BranchName = t.data.BranchName }, function () { }), l.get("api/account/store", null, function (t) { i.authentication.manageStoreId = t.data.ManageStoreID, i.authentication.expirydate = t.data.Expirydate, i.authentication.createdate = t.data.CreateDate, i.authentication.business = t.data.Business, i.authentication.addressStore = t.data.Address, i.dateTime = t.data.Expirydate; var a = "", e = i.dateTime.substring(8, 10), n = i.dateTime.substring(5, 7), o = i.dateTime.substring(0, 4); a = n + "/" + e + "/" + o; var l = new Date, d = new Date(a), s = Math.abs(d.getTime() - l.getTime()), c = Math.ceil(s / 864e5); i.showdateend = c, i.showdateend > 7 && 0 !== $("#showone").length && (document.getElementById("showone").style.display = "none"), i.GetNotification(t.data.ManageStoreID) }, function (t) { e.displayError(t.data) }) }, function (t) { e.displayError(t.data) }) } function s(t) { l.get("api/ManageStore/getNotification?id=" + t, null, function (t) { if (i.list_Notifi = t.data, i.list_Notifi.length > 0) { for (var a in i.list_Notifi) i.list_Notifi[a].stt = a, 0 === i.list_Notifi[a].Status && (i.quan_notifi = i.quan_notifi + 1); i.quan_notifi > 0 ? (i.dis_notifi = "block", i.class_wavein = "wave in") : (i.dis_notifi = "none", i.class_wavein = "") } else i.dis_notifi = "none", i.class_wavein = "" }, function () { }) } function c() { i.dis_notifi = "none", i.class_wavein = "", "none" === document.getElementById("a2").style.display && "none" === document.getElementById("chatbar1").style.display ? (document.getElementById("a2").style.display = "block", document.getElementById("chatbar1").style.display = "none") : "block" === document.getElementById("a2").style.display && "none" === document.getElementById("chatbar1").style.display ? (document.getElementById("a2").style.display = "none", document.getElementById("chatbar1").style.display = "none") : "none" === document.getElementById("a2").style.display && "block" === document.getElementById("chatbar1").style.display ? (document.getElementById("a2").style.display = "none", document.getElementById("chatbar1").style.display = "none") : "block" === document.getElementById("a2").style.display && "block" === document.getElementById("chatbar1").style.display && (document.getElementById("a2").style.display = "none", document.getElementById("chatbar1").style.display = "none") } function u(t) { i.Content_detail = i.list_Notifi[t].Contents, 0 === i.list_Notifi[t].Status && null !== i.list_Notifi[t].ManageStoreID && (i.list_Notifi[t].Status = 1, l.put("api/ManageStore/updateNotifi", i.list_Notifi[t], function () { }, function () { })) } i.logOut = function () { l.get("api/account/signout", null, function () { n.logOut(), t.go("login") }, function () { }) }, i.authentication = a.authenticationData; var d; i.GetNotification = s, i.list_Notifi = [], i.class_wavein = "", i.dis_notifi = "none", i.quan_notifi = 0, i.Notifi_Click = c, i.Notifi_Content_Click = u, i.Content_detail = "", d() } t.controller("rootController", a), a.$inject = ["$state", "authData", "notificationService", "loginService", "$scope", "authenticationService", "apiService"] }(angular.module("tiktak"));